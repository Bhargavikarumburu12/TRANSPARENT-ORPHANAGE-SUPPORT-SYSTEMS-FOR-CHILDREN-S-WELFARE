package servlet;

import java.security.Key;

import javax.crypto.Cipher;
import javax.crypto.spec.SecretKeySpec;

import sun.misc.*;

public class AES 
{
private static String algorithm = "AES";
private static byte[] keyValue=new byte[] 
{ 'A', 'S', 'e', 'c', 'u', 'r', 'e', 'S', 'e', 'c', 'r', 'e', 't', 'K', 'e', 'y' };

        // Performs Encryption
        public static String encrypt99(String plainText) throws Exception 
        {
                Key key = generateKey();
                Cipher chiper = Cipher.getInstance(algorithm);
                chiper.init(Cipher.ENCRYPT_MODE, key);
                byte[] encVal = chiper.doFinal(plainText.getBytes());
                String encryptedValue = new BASE64Encoder().encode(encVal);
                return encryptedValue;
        }

        // Performs decryption
        public static String decrypt(String encryptedText) throws Exception 
        {
                // generate key 
                Key key = generateKey();
                Cipher chiper = Cipher.getInstance(algorithm);
                chiper.init(Cipher.DECRYPT_MODE, key);
                byte[] decordedValue = new BASE64Decoder().decodeBuffer(encryptedText);
                byte[] decValue = chiper.doFinal(decordedValue);
                String decryptedValue = new String(decValue);
                return decryptedValue;
        }

//generateKey() is used to generate a secret key for AES algorithm
        private static Key generateKey() throws Exception 
        {
                Key key = new SecretKeySpec(keyValue, algorithm);
                return key;
        }

       
}












package servlet;
import java.security.Key;

    import javax.crypto.Cipher;

    import sun.misc.BASE64Decoder;
    import sun.misc.BASE64Encoder;

    public class Encryptdata {
        public static String encrypt(String Data) throws Exception
        {      
            
                System.out.println("Encrypted in coming");
                Key key = Publickey.generateKey();
                Cipher c = Cipher.getInstance("AES");
                c.init(Cipher.ENCRYPT_MODE, key);
                byte[] encVal = c.doFinal(Data.getBytes());
                String encryptedValue = new BASE64Encoder().encode(encVal);
                return encryptedValue;
                
         }
        
        public static String decrypt(String encryptedData) throws Exception 
        {
            Key key = Publickey.generateKey();
            Cipher c = Cipher.getInstance("AES");
            c.init(Cipher.DECRYPT_MODE, key);
            byte[] decordedValue = new BASE64Decoder().decodeBuffer(encryptedData);
            byte[] decValue = c.doFinal(decordedValue);
            String decryptedValue = new String(decValue);
            //System.out.println("key is :::"+ABEKey.generateKey());
            return decryptedValue;
        }
        

    }
  















package servlet;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.util.ArrayList;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.poi.hwpf.HWPFDocument;
import org.apache.poi.hwpf.extractor.WordExtractor;

import com.itextpdf.text.Chunk;
import com.itextpdf.text.Document;
import com.itextpdf.text.Font;
import com.itextpdf.text.PageSize;
import com.itextpdf.text.Paragraph;
import com.itextpdf.text.pdf.PdfReader;
import com.itextpdf.text.pdf.PdfWriter;
import com.itextpdf.text.pdf.parser.PdfTextExtractor;
import com.lowagie.text.Element;
import com.oreilly.servlet.multipart.FilePart;
import com.oreilly.servlet.multipart.MultipartParser;
import com.oreilly.servlet.multipart.ParamPart;
import com.oreilly.servlet.multipart.Part;

import dbcon.dbcon;

@WebServlet("/Dreg_login")
public class Dreg_login extends HttpServlet {
    private static final long serialVersionUID = 1L;
       
    /**
     * @see HttpServlet#HttpServlet()
     */
    public Dreg_login() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        response.getWriter().append("Served at: ").append(request.getContextPath());
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        doGet(request, response);
        
MultipartParser mp =new MultipartParser(request, 999999999);
        
        Part part = null;
        ArrayList paramValues = new ArrayList();

        FilePart filepart = null;
        ParamPart param=null;
        File file1 = null;
        String filepath1 = null;
        String filetype=null;
        String filepath2 = null;
        String filename = null;
        
        long size=0;
        String path=getServletContext().getRealPath("");
        
        System.out.println("path=="+path);
        
        
        String editpath=path.substring(0, path.indexOf("."));
        
        System.out.println("edithpath=="+editpath);
        
        String fullpath=editpath+"NS02-Orphanage\\WebContent\\Dlocal\\";
        
        
        System.out.println("fullpath=="+fullpath);
        
        while((part=mp.readNextPart())!=null)
        {
            
            if(part.isFile())
            {
                
                filepart=(FilePart)part;
        
                filename=filepart.getFileName();
                System.out.println("filename=="+filename);
                
                fullpath=fullpath+filename;
                System.out.println("fullpath=="+fullpath);
                
                
                File file=new File(fullpath);
                size=filepart.writeTo(file);
                System.out.println("size=="+size);
                
                 filetype=filepart.getContentType();
                System.out.println("filetype---"+filetype);
                
            }
            else if(part.isParam())
            {
                param = (ParamPart) part;
                String tagName =param.getName();
                System.out.println("tagName ============= " + tagName);
                String tagValue = param.getStringValue();
                System.out.println("tagValue ************ " + tagValue);
                 
                paramValues.add(tagValue);
                paramValues.add(tagName);
                
            }
        }
        
        String filecontent = "";    
        String encrpt = null;
         String encontent = null;
         

        if (filename.endsWith(".txt")) {// if open

//file encrypted and store into filepath1
            
            FileInputStream fis = new FileInputStream(fullpath);
            byte[] b = new byte[fis.available()];
            fis.read(b);
            String reading = new String(b);
            filecontent = filecontent + reading;
            System.out.println("filecontent=" + filecontent);
           
            try {//try1 open
                
                
                encontent = AES.encrypt99(filecontent);
                    System.out.println("encontent===="+encontent);
         filepath1 = editpath + "\\NS02-Orphanage\\WebContent\\Encrypt\\"+filename;
              file1 = new File(filepath1);
                    file1.createNewFile();
                    if (!file1.exists()) {file1.createNewFile();}// If file doesn't exists, then create it
                    FileWriter fw = new FileWriter(file1.getAbsoluteFile());
                    BufferedWriter bw = new BufferedWriter(fw);
                    bw.write(encontent);// Write in file
                    bw.close();// Close connection
                    System.out.println("fileeeeeeeeeeeeeeeee" + filepath1);
       
          //file decrypted and store into filepath2
                    String decontent= AES.decrypt(encontent);
                    System.out.println("decontent===="+decontent);
                filepath2 = editpath + "\\NS02-Orphanage\\WebContent\\Decrypt\\"+filename;
                    File file2 = new File(filepath2);
                    file2.createNewFile();
                    if (!file1.exists()) {file1.createNewFile();}// If file doesn't exists, then create it
                    FileWriter fw1 = new FileWriter(file2.getAbsoluteFile());
                    BufferedWriter bw1 = new BufferedWriter(fw1);
                    bw1.write(decontent);// Write in file
                    bw1.close();// Close connection
                    System.out.println("fileeeeeeeeeeeeeeeee" + filepath2);
       
                    
                    } catch (Exception e) {
                
                e.printStackTrace();
            }
            
            
        }
        else if (filename.endsWith(".docx")) 
        {  
            WordExtractor extractor = null;
            
            FileInputStream fis2=new FileInputStream(fullpath);
            System.out.println("file is"+fis2);
            HWPFDocument document=new HWPFDocument(fis2);
            extractor = new WordExtractor(document);
            String [] fileData = extractor.getParagraphText();
            String mydate=extractor.getTextFromPieces();
            System.out.println("DATASSSSSSSSSSSSSSSSSss "+fileData);
            System.out.println("THE MYYYYYYYYYYY "+mydate);
            String text1=null;
            System.out.println("filedata len  "+fileData.length);
        }
        
        else if(filename.endsWith(".pdf"))
        { 
            //System.out.println("padf file name"+file1.getName());
        
    
        PdfReader pdfReader=new PdfReader(fullpath);
            String  Text7 = null;
            int pages=pdfReader.getNumberOfPages();
            for(int i1=1;i1<pages;i1++)
            {
                 filecontent=PdfTextExtractor.getTextFromPage(pdfReader, i1);
                System.out.println("page:"+i1+" "+filecontent);
                Text7=Text7+filecontent;
                
            }
            System.out.println("Pdf full content ="+Text7);
    
        try {
            encrpt = Encryptdata.encrypt(filecontent);
        Document document=new Document(PageSize.A4);
        /*  File file=new File("C:\\Users\\spiro13\\Desktop\\naga\\"+pdffilename);
          System.out.println(file.delete());*/
        PdfWriter.getInstance(document, new FileOutputStream(new File(filepath2+filename)));
        //FileOutputStream fileOutputStream=new FileOutputStream("C:\\Users\\spiro13\\Desktop\\naga\\pdffilename1.pdf");
        Chunk chunk=new Chunk(encrpt);
        document.open();
        Font font=new Font();
        font.setStyle(Font.BOLD);
        Paragraph p1=new Paragraph(chunk);
        p1.setAlignment(Element.ALIGN_LEFT);
        document.add(p1);
        document.close();
        System.out.println("pdf writing is completed");
        //fileOutputStream.write(encrpt.getBytes());
        System.out.println(encrpt);
        } catch(Exception e)
        {
            e.printStackTrace();
        }
           
        try {
            
            //try1 open
                
            
        encontent = AES.encrypt99(filecontent);
            System.out.println("encontent===="+encontent);
 filepath1 = editpath + "\\NS02-Orphanage\\WebContent\\Encrypt\\"+filename;
      file1 = new File(filepath1);
            file1.createNewFile();
            if (!file1.exists()) {file1.createNewFile();}// If file doesn't exists, then create it
            FileWriter fw = new FileWriter(file1.getAbsoluteFile());
            BufferedWriter bw = new BufferedWriter(fw);
            bw.write(encontent);// Write in file
            bw.close();// Close connection
            System.out.println("fileeeeeeeeeeeeeeeee" + filepath1);

  //file decrypted and store into filepath2
            String decontent= AES.decrypt(encontent);
            System.out.println("decontent===="+decontent);
        filepath2 = editpath + "\\NS02-Orphanage\\WebContent\\Decrypt\\"+filename;
            File file2 = new File(filepath2);
            file2.createNewFile();
            if (!file1.exists()) {file1.createNewFile();}// If file doesn't exists, then create it
            FileWriter fw1 = new FileWriter(file2.getAbsoluteFile());
            BufferedWriter bw1 = new BufferedWriter(fw1);
            bw1.write(decontent);// Write in file
            bw1.close();// Close connection
            System.out.println("fileeeeeeeeeeeeeeeee" + filepath2);

            
            }// try close
       
        catch (Exception e) {
            System.out.println(e);
        }
        
        }
        
        

        Connection con;
        int reg=0;
            
        
        
            try {
                con=dbcon.create();
                
                    PreparedStatement ps=con.prepareStatement("INSERT INTO child_trust.donated_users VALUES(id,?,?,?,?,?,?,?)");
                    ps.setString(1, paramValues.get(0).toString());
                    ps.setString(2, paramValues.get(2).toString());
                    ps.setString(3, paramValues.get(4).toString());
                
                    ps.setString(4, paramValues.get(6).toString());
                    ps.setString(5, filename);
                    ps.setString(6, encontent);
                    ps.setString(7, "request");
 
                
                    
                    
                    ps.executeUpdate();

                    
                    response.sendRedirect("Duser_Login.jsp");
                    
    } catch (SQLException e) {
    
    e.printStackTrace();
    }
        

        
        
    

    }

}














<html>
<head>

<title>Children Healthcare Donation | Homepage</title>

<style>

@import "compass/css3";

body {
  background-image: url("images/unnamed.jpg");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

ul > li > a:first-child:nth-last-child(2){
background: red;
}

/*a is all the links inside the li class in the nav class. I specified that it was not the only a link*/

nav > li > a:not(:only-child){
  position: relative; 
  position: absolute;   
  top: 40% ;
  right:5px;  
  }

nav{
display:block;
text-align: center;
  ul{
    margin:0;
    padding: 0;
    list-style-type: none;
  }
}

.nav a {
  display:block; 
  background: #111; 
  color: white; 
  text-decoration: none;
  padding: 0.8em 1.8em;
  text-transform: uppercase;
  font-size: 80%;
  letter-spacing: 2px;
  text-shadow: 0 -1px 0 #000;
  position: relative;
}

.nav{  
  vertical-align: top; 
  display: inline-block;
}

.nav li {
  position: relative;
  float: left; 
  margin-right: 1px; 
}

/* arrow hover styling */
.nav li:hover > a { 
  color:#9c1b30 ; 
}
  
/*slideshow stuff */
.slides {
   margin: 0; /*need to reset to 0,padding too*/
   padding: 0;
   width: 600px;
   height: 300px;
   margin: 0px auto;
   overflow: hidden;
}

.allslides {
  margin: 0;
  padding: 0;
   width: 1800px; 
   -webkit-animation: slide 8s ease infinite;
}

.slides .slide {
   width: 600px;
   height: 300px;
   float: left;
  }

/*takes the nth object in it's class and applies background:url() command*/

.slides div:nth-of-type(1) {
   background:url(https://i.imgur.com/TbjsEM5.png);
}

.slides div:nth-of-type(2) {
   background:url(https://i.imgur.com/3H3qo48.png);
}

.slides div:nth-of-type(3) {
   background:url(https://i.imgur.com/3H3qo48.png);
}

/*animation to switch through slides, moves image from the left margin x px and then negative moves it back. */

@-webkit-keyframes slide {
  15% {margin-left: 0px;} 
  30% {margin-left: 0px;}
  45% {margin-left: -600px;}
  60% {margin-left: -600px;}
  75% {margin-left: -1200px;}
  90% {margin-left: -1200px;}
  100% {margin-left: 0px;}
  }
  
  
/* Footer styles */
.footer {
  background-color: #111; /* Dark background color */
  color: white; /* Text color */
  padding: 20px; /* Padding around the content */
  text-align: center; /* Center-align the text */
  position: fixed; /* Position the footer */
  bottom: 0; /* Align it to the bottom of the viewport */
  left: 0; /* Align it to the left edge */
  width: 100%; /* Make it span the full width of the viewport */
}

.footer p {
  margin: 0; /* Remove default margin */
}

.footer a {
  color: white; /* Link color */
  text-decoration: none; /* Remove underline */
}
  
</style>

<body> 

<center> <img src="https://i.imgur.com/UMXRDXs.png">   </center>

  <!--nav tag prepares for a list of navigation links-->
  
  <center>
  
   <nav>
    <ul class="nav">
      <li><a href="GovtAdmin_RegLogin.jsp">Govt_Admin</a>
      <li><a href="Trusts_RegLogin.jsp">Trusts</a></li>
      <li><a href="dreg.jsp">Donate us</a></li>
       <li><a href="ghospital.jsp">Govt_Hospital_Management</a></li> 
      <li><a href="map.jsp">Map</a></li>
      <li><a href="contact.jsp">Contact Us</a></li>
    </ul>
   </nav>
  
  <!--Next is going to be the slideshow, div is a container -->
<div class="slides">
  <div class="allslides">
    <div class="slide"></div>
    <div class="slide"></div>
    <div class="slide3="></div>
  </div>
</div>
  <!--writing stuff-->
  <h3 style="color: white;">
    Giving your money is just as important as knowing where it ends up</h3>
  <p style="color: white;">We offer a service to the people, for the people. <br>Welcome to a website that will provide information to make sure your donation reaches it's intended target.

<!-- Footer -->
  <footer class="footer">
      <p>Contact us: <a href="mailto:example@example.com">example@example.com</a> | Phone: +123456789</p>
    <p>&copy; 2024 Your Website</p>
  </footer>

</body>

</html>
